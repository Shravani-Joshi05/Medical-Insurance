# -*- coding: utf-8 -*-
"""Untitled25.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1rafIdsHaga-gEM55ha4JW0tiQh0Lvu5L
"""

import streamlit as st
import numpy as np
import pickle

st.set_page_config(page_title="Insurance Cost Prediction", layout="wide")

st.title("ðŸ’° Medical Insurance Cost Prediction")
st.write("Linear Regression model deployed using Streamlit")

# -------------------------------
# Load trained model
# -------------------------------
@st.cache_resource
def load_model():
    with open("insurance_model.pkl", "rb") as file:
        model = pickle.load(file)
    return model

model = load_model()

# -------------------------------
# Create two columns
# -------------------------------
left_col, right_col = st.columns(2)

# -------------------------------
# LEFT SIDE â†’ User Inputs
# -------------------------------
with left_col:
    st.subheader("ðŸ§¾ Enter Customer Details")

    age = st.number_input("Age", 18, 100, 30)
    sex = st.selectbox("Sex", ["male", "female"])
    bmi = st.number_input("BMI", 10.0, 60.0, 25.0)
    children = st.number_input("Number of Children", 0, 5, 0)
    smoker = st.selectbox("Smoker", ["yes", "no"])
    region = st.selectbox(
        "Region",
        ["southwest", "southeast", "northwest", "northeast"]
    )

    predict_btn = st.button("Predict Insurance Cost")

# -------------------------------
# Encode Inputs
# -------------------------------
sex = 1 if sex == "male" else 0
smoker = 1 if smoker == "yes" else 0

region = {
    "southwest": 0,
    "southeast": 1,
    "northwest": 2,
    "northeast": 3
}[region]

# -------------------------------
# RIGHT SIDE â†’ Prediction Output
# -------------------------------
with right_col:
    st.subheader("ðŸ“Š Prediction Result")

    if predict_btn:
        input_data = np.array([[age, sex, bmi, children, smoker, region]])
        prediction = model.predict(input_data)

        st.success(f"ðŸ’µ Predicted Insurance Cost")
        st.markdown(
            f"<h2 style='color:green;'>â‚¹ {prediction[0]:,.2f}</h2>",
            unsafe_allow_html=True
        )
    else:
        st.info("Enter details on the left and click Predict")